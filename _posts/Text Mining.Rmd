---
title: "Text Mining"
author: "Lisa"
date: "November 17, 2015"
output: 
  html_document:
    toc: true
    toc_depth: 3
    theme: united
    highlight: tango
---



#Data

The unstructured text data is called "radiology". Let's read it first

```{r,warning=FALSE,message=FALSE}
library(tm)
radiology=read.csv("radiology_results.csv",header = TRUE)
radiology=read.csv("radiology_results.csv",header = TRUE, stringsAsFactors=FALSE) #set strings As Strings
```

#Term frequency
Let's applying a simple text analysis to find the frequency of each important word used. We are going to do the following steps:

1. Set up a source for your text.
2. Create a corpus from that source (a corpus is just another name for a collection of texts).
3. Create a document-term matrix, which tells you how frequently each term appears in each document in your corpus.

```{r}
#only take a sample of 1000 obs
radiology=radiology[1:1000,]
#simply paste every review together, separating with a space.
radiology_result <- paste(radiology$RESULT , collapse=" ")

radiology_source <- VectorSource(radiology_result)
corpus <- Corpus(radiology_source)
#transforme every word to lower case
corpus <- tm_map(corpus, content_transformer(tolower))
#remove punctuation
corpus <- tm_map(corpus, removePunctuation)
#stripped out any extra whitespace
corpus <- tm_map(corpus, stripWhitespace)
#remove stopwords
stopwords("english")
corpus <- tm_map(corpus, removeWords, stopwords("english"))

#create the document-term matrix
dtm <- DocumentTermMatrix(corpus)
#convert our term-document-matrix into a normal matrix
dtm2 <- as.matrix(dtm)
frequency <- colSums(dtm2)
#sort this vector to see the most frequently used words
frequency <- sort(frequency, decreasing=TRUE)
head(frequency)
```

Hmm. It seems a kind of usless, because we are not interested in words like "right" and "left". I'll make a more useful text analysis on *"text mining2"*. To be continue,...

#Plot these frequencies as a word cloud

Just for fun!

```{r,warning=FALSE}
#Plotting a word cloud
#install.packages('wordcloud')
library(wordcloud)
words <- names(frequency)
wordcloud(words[1:100], frequency[1:100])

```

